<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>构建动作块代码</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Article explaining how to construct DnD code" />
  <meta name="rh-index-keywords" content="DnD™ Overview - Constructing Action Block Code" />
  <meta name="search-keywords" content="DnD,Code DnD,Construct DnD,DnD™ Comments" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>构建动作块代码</h1>
  <p>为了给对象添加行为，你可以使用<strong>动作工具箱</strong>中不同库的<strong>动作 </strong>来构建你的代码。首先，你需要建立一个新的<a href="../../Introduction/The_Start_Page.htm">拖<span class="notranslate">放项目</span></a>，然后建立一个新的<a href="../../The_Asset_Editors/Objects.htm">对象（</a>如果需要，你也可以<a href="../../The_Asset_Editors/Sprites.htm">给</a>对象分配一个精灵）。在你的新对象中，你可以开始添加<a href="../../The_Asset_Editors/Object_Properties/Object_Events.htm">事件</a>。
    并在事件中添加你的<span class="notranslate">DnD</span>™代码动作。</p>
  <p><img alt="DnD™ Create Event" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Create_Event.png">注意，当你添加一个新的事件时，一个 &quot;代码 &quot;窗口被打开，其中有一个给定事件的标签（见上面的图片
    上图），现在你可以从右边的工具箱中拖动任何你想要的动作到代码窗口的动作块窗格中。现在，虽然你确实可以添加任何动作，但这并不意味着它们都能工作，也不意味着项目会用它们来编译。
    编译它们。有些动作需要至少一个<a class="glossterm" data-glossterm="变量" href="#">变量</a>才能工作，而其他的动作--如<a href="../Drag_And_Drop_Reference/Drawing/Drawing_Actions.htm">绘图</a>动作--只有在特定的事件中使用时才会工作。
    只有在一个特定的事件中使用时才能工作。你怎么知道要使用哪些动作？嗯，一般来说，这只是一个使用逻辑的问题......如果一个动作需要一个变量，而我们还没有定义一个变量，那么我们就不应该使用它，直到我们已经
    我们就不应该使用它，直到我们添加一个动作来创建这个变量。</p>
  <p>当你从工具箱中拖动一个动作到主动作块工作区时，它将展开显示可用的<span class="glossextra">参数</span>（参数），你可以填入这些参数来设置行为。
    你可以填入和改变这些参数来设置行为。在下面的图片中，我们从工具箱的<a href="../Drag_And_Drop_Reference/Common/Common_Actions_Library.htm">公共库中</a>拖了一个<a href="../Drag_And_Drop_Reference/Common/Assign_Variable.htm">分配变量</a>的动作到
    动作块工作区。</p>
  <p><img alt="DnD™ Assign Variable" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Add_Var.png">你可以看到，新的动作也以速记的形式显示在代码窗口的左边。这个动作的列表。
    称为 "动作概览"，可以点击它来快速导航到该动作进行编辑。如果需要，你可以继续向事件添加动作，每一个新的动作都与前一个动作 &quot;连锁&quot;，以显示你正在构建的DnD™代码的流程。
    构建的<span class="notranslate">DnD</span>™代码的流程。请注意，在初始动作的下方，你可以放置更多动作的区域被高亮显示，而且，根据你使用的动作，不同的区域会高亮显示你可以在链的哪个位置
    添加它。</p>
  <p><img alt="DnD™ Set Direction Variable" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Set_Dir.png">当你向工作区添加动作时，它们会被 &quot;串联 &quot;到上面的动作上，这样你就可以看到DnD™代码是如何流动的，一个动作导致另一个动作。
   <span class="notranslate">DnD</span>™代码的流程，一个动作导致另一个动作，概览窗格以速记形式和执行顺序显示它们。</p>
  <p><img alt="DnD™ chain of actions" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Scope_Other.png">有些动作会将代码放置在远离主流程的单独链条中--像<a href="../Drag_And_Drop_Reference/Common/If_Variable.htm">If Variable</a>这样的事情会
    创建一个<em>子</em>动作链，如果满足正确的条件，在继续主动作链之前应该发生。</p>
  <p><img alt="DnD™ side chain of actions" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_If_Variable.png">注意，当使用像这样可以有一个侧链块的行动时，该行动将有<em>两个 </em>区域
    突出显示，用于丢弃进一步的动作。</p>
  <ul class="colour">
    <li>一个人在下面的行动是正常的</li>
    <li>在动作的右边有一个，表明你想创建一个单独的动作块，在第一个动作的条件返回为真时运行。</li>
  </ul>
  <p><img alt="DnD™ Side Chain Of Actions" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_If_Drop.png">你可以通过简单地点击<img alt="LMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_LMB.png" width="21"> ，并把它们拖到你需要的新位置，来改变动作在链中的位置，如果你做一个点击<img alt="LMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_LMB.png" width="21"> ，并保持一秒钟，然后移动鼠标，你可以在工作区中移动动作，同时保持它在动作块链中的位置。
    按住一秒钟然后移动鼠标，你可以在工作区中移动动作，同时保持它在动作块链中的位置。</p>
  <p>也可以给<span class="notranslate">Drag and Drop</span>™动作添加<strong>注释</strong>，所以你可以在不同的块旁边留下注释，解释它们的作用（这在团队工作中特别有用）。</p>
  <p><img alt="DnD™ Add Comment" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Add_Comment.gif">你可以从<a href="Right_Mouse_Button_Menu_Options.htm">鼠标右键菜单</a>的页面上了解到更多关于这个功能的信息。</p>
  <p>这就是使用<span class="notranslate">拖放式</span>代码编辑器的基本原理，但还有一些重要的细节在下面的章节中解释。</p>
  <p> </p>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#">目标变量</a></p>
  <div class="droptext" data-targetname="drop-down1">
    <p class="dropspot">值得注意的是，许多行动提供了一个 &quot;目标 &quot;变量，例如，可以标记为 &quot;临时&quot;。</p>
    <p class="dropspot"><img alt="Example Of Target" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Audio_Get_Audio_Volume.png">这意味着你可以提供一个变量，这个变量是目标，用来保存由
      动作返回的值。在上面的例子中，动作将返回你选择的音频资源的音量，所以你提供一个目标变量来保存这个值，这样你以后就可以引用它。</p>
    <p class="dropspot">现在，这个目标变量需要事先用<a href="../Drag_And_Drop_Reference/Common/Assign_Variable.htm">分配变量</a>（<a href="../Drag_And_Drop_Reference/Common/Assign_Variable.htm">Assign Variable</a>）或<a href="../Drag_And_Drop_Reference/Common/Declare_Temporary_Variable.htm">声明临时变量</a>（<a href="../Drag_And_Drop_Reference/Common/Declare_Temporary_Variable.htm">Declare</a> <strong>Temporary</strong> Variable）来声明。
      如果你勾选了 &quot;Temp &quot;选项，那么你可以简单地添加一个变量名，动作将创建该变量并设置它为你保存返回值（创建一个临时的<strong>本地</strong>
      变量）。)此后使用的任何动作现在都可以访问临时变量中的值，<strong>但只能在同一事件或脚本中</strong>使用。临时变量只能在它们被创建的范围内使用。对于更深入的
      关于变量和变量范围的更深入信息，请看<a href="../../GameMaker_Language/GML_Overview/Variables_And_Variable_Scope.htm">这里</a>。</p>
    <p class="dropspot"> </p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#">行动范围</a></p>
  <div class="droptext" data-targetname="drop-down2">
    <p class="dropspot">不仅变量有作用域（见上面的<strong>目标变量 </strong>部分），动作也可以有不同的作用域。事实上，几乎所有的动作都可以被赋予不同的作用域，可以在动作中打开的下拉窗口中设置
      本身的下拉窗口中设置，如图所示。</p>
    <p class="dropspot"><img alt="DnD™ Applies To" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Applies_To.png">你还可以使用特殊的行动 "<a href="../Drag_And_Drop_Reference/Common/Apply_To...htm">应用于</a>"来设置所有进一步行动的范围。
      关于<span class="notranslate">DnD</span>™动作的这一特性的更多信息，请看这里。</p>
    <ul class="dropspotlist">
      <li class="dropspot"><a href="Applying_Actions_To_Other_Instances.htm">将行动应用于其他实例</a></li>
    </ul>
    <p class="dropspot"> </p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down3" href="#">汽车整车</a></p>
  <div class="droptext" data-targetname="drop-down3">
    <p class="dropspot">当使用 "<span class="notranslate">拖放</span>"工作时，你将不得不把变量和表达式添加到动作的不同输入字段中。然而，当你这样做时，你经常会弹出<strong>自动完成</strong>窗口来帮助你。</p>
    <p class="dropspot"><img alt="Auto Complete" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Action_AutoComplete.png">这个弹出的窗口将列出所有内置的<span class="notranslate">GML</span><span class="notranslate">（GameMaker语言</span>）变量、常量和函数，以及任何包含你所输入内容的首字母的资源。
      以及任何包含你所输入内容的首字母的资源。它可以用来快速找到你想要的资源或变量，而不必自己全部输入。例如，如果你所有的房间
      的前缀是 &quot;<span class="inline">rm_</span>&quot;，那么输入这个词并等待片刻，就会显示自动完成窗口，显示所有以 &quot;<span class="inline">rm_</span>&quot;开头的资产。请注意，所有内置的变量
      在自动完成窗口中显示的所有内置变量都可以在动作中预期有变量或表达式的地方使用，大多数<span class="notranslate">GML</span>函数也是如此。</p>
    <p class="dropspot"> </p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down4" href="#">行动扩展</a></p>
  <div class="droptext" data-targetname="drop-down4">
    <p class="dropspot">有时在使用一个动作时，你会看到边上有一个小的加号图标<img alt="Expand Arguments Icon" src="../../assets/Images/Icons/Icon_Expand_Arguments.png"> 。这意味着你可以扩展该动作，以执行额外的任务或接受更多的
      参数。例如，如果你看一下<a href="../Drag_And_Drop_Reference/Common/Declare_Temporary_Variable.htm">声明临时变量</a>的动作，你可以看到它有这个图标。</p>
    <p class="dropspot"><img alt="Temp Variable Expansion" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Declare_Temp_Var.png">当你点击该图标时，该动作将<em>展开 </em>并允许你声明更多的变量，使
      使得同时定义多个变量变得更加容易和快捷。</p>
    <p class="dropspot"><img alt="Temp Variable Expansion Example" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Expansion_Example.png">该图标也可用于那些需要<strong>可选 </strong>参数的动作。
      比如<a href="../Drag_And_Drop_Reference/Random/Choose.htm">Choose</a>动作，它允许你添加各种不同的值来返回。</p>
    <p class="dropspot"><img alt="Choose Expansion Example" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Mathematics_Choose.png" /></p>
  </div>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回:<a href="../../Content.htm">索引</a></div>
        <div style="float:right">下一步。<a href="Applying_Actions_To_Other_Instances.htm">将操作应用于其他实例</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span>版权所有。2021年 保留所有权利</span></h5>
  </div>
  <!-- KEYWORDS
<span class="notranslate">Drag And Drop</span> Construction
-->
  <!-- TAGS
drag_and_drop_construction
-->
</body>
</html>