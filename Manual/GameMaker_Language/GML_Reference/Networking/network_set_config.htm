<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>network_set_config</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="network_set_config的参考页" />
  <meta name="rh-index-keywords" content="network_set_config,network_config_connect_timeout,network_config_use_non_blocking_socket,network_config_enable_reliable_udp,network_config_disable_reliable_udp,network_config_avoid_time_wait" />
  <meta name="search-keywords" content="network_set_config,network_config_connect_timeout,network_config_use_non_blocking_socket,network_config_enable_reliable_udp,network_config_disable_reliable_udp,network_config_avoid_time_wait" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1>network_set_config</h1><p>使用此功能可以设置不同的网络配置。</p><p class="note"><b>注意</b>：在HTML5目标上运行的项目中使用此功能时将不起作用。</p><p>这些配置以<b>常量</b>形式给出，并且设置将取决于您选择的常量。下表列出了可用的常量及其设置：</p><p></p><table><tbody><tr><th>持续的</th><th>描述</th><th>环境</th></tr><tr><td><span class="notranslate">network_config_connect_timeout</span></td><td>设置连接超时值</td><td><span class="notranslate">A value in milliseconds</span></td></tr><tr><td> <span class="notranslate">network_config_use_non_blocking_socket</span></td><td>告诉<span class="notranslate">GameMaker Studio 2</span>不要阻止连接。</td><td> <span class="notranslate">0 = block, 1 = don&#39;t block</span></td></tr><tr><td> <span class="notranslate">network_config_enable_reliable_udp</span></td><td>为现有的UDP套接字启用“可靠的UDP”协议</td><td><span class="notranslate">The socket ID to target</span></td></tr><tr><td> <span class="notranslate">network_config_disable_reliable_udp</span></td><td>对已存储的现有UDP禁用“可靠的UDP”协议。</td><td> <span class="notranslate">The socket ID to target</span></td></tr><tr><td> <span class="notranslate">network_config_avoid_time_wait</span></td><td>设置<span class="inline">SO_LINGER</span>现有TCP套接字的超时值设置为0</td><td> <span class="notranslate">The socket ID to target</span></td></tr></tbody></table><p><br/><br/>第一个选项（<tt>network_config_connect_timeout</tt> ）只是设置了连接服务器的超时时间，但除了需要等待的时间外，没有改变连接行为。建议您不要将此值设置得太低，对于仅LAN的游戏，不要将其设置在1000左右；对于Internet，将其保持在4000左右，否则游戏可能无法随机连接。如果您希望设置发送/接收数据包的超时值，请使用此功能 <a href="network_set_timeout.htm"><tt>network_set_timeout()</tt></a>。</p><p>第二个选项（<tt>network_config_use_non_blocking_socket</tt> ）表示网络连接功能将全部返回 <tt>socket_id</tt>即时，<i>但只有在收到异步网络事件后才能在该套接字上发送或接收</i>。触发的事件会将“类型”键设置为 <tt>network_type_non_blocking_connect</tt><a href="../../../The_Asset_Editors/Object_Properties/Async_Events/Networking.htm">（您可以从“网络异步事件</a>”页面上找到更多详细信息）。这是<b>全局</b>设置，因为<span class="notranslate">GameMaker Studio 2</span>不支持在一个应用程序中同时进行阻止和非阻止的混合操作。</p><p>第三和第四种选择（<tt>network_config_enable_reliable_udp</tt> ，<tt>network_config_disable_reliable_udp</tt> ）用于启用或禁用<span class="notranslate">GameMaker Studio 2</span>可靠的UDP协议，因此，<b>仅应与UDP连接一起使用</b>。在这种情况下，“可靠”的意思是，在连接的两端<i>都</i><span class="notranslate">GameMaker Studio 2</span>会尝试检查您的数据包是否正确到达，然后重新发送未到达的数据包（请注意，我们不保证在您的数据包中将以传输顺序到达）。当使用可靠的套接字类型时，将向所有udp数据包添加12字节的标头，其中包含<span class="notranslate">GameMaker Studio 2</span>所需的信息，以检查数据包是否有错误并重新发送丢失的数据包。使用此选项时，以下几点值得注意：</p><ul class="colour"><li>发送数据之前，应先在两侧启用/禁用该协议，并且在启用/禁用该选项之前发送或接收的任何数据都不会受到影响。</li><li>您可以多次为任何给定的套接字ID启用或禁用协议，只要在服务器端和客户端均对其进行了适当的管理即可</li><li>可能有两个单独的UDP套接字，一个对一个启用了可靠的UDP，一个对另一个禁用了可靠的UDP。</li></ul><p>最后的选择，<span class="inline">network_config_avoid_time_wait</span>仅用于<strong>TCP连接</strong>，可用于设置 <span class="inline">SO_LINGER</span>值设为0 <span>o避免大量连接位于 <span class="inline">TIME_WAIT</span></span><span>状态，占用服务器上的所有可用资源。</span>套接字处于活动状态时，此更改是永久的，无法撤消。</p><p></p><h4>句法：</h4><p class="code">network_set_config(config_value, setting);</p><table><tbody><tr><th>争论</th><th>描述</th></tr><tr><td><span class="notranslate">config_value</span></td><td>要设置的配置值常量（在下面列出）。</td></tr><tr><td> <span class="notranslate">setting</span></td><td>配置值的设置。</td></tr></tbody></table><p></p><h4>返回值：</h4><p class="code">String</p><p></p><h4>例子：</h4><p class="code">network_set_config(network_config_connect_timeout, 1000);<br/> network_set_config(network_config_use_non_blocking_socket, 1);</p><p>上面的代码将网络连接的超时设置为1000ms，并告诉<span class="notranslate">GameMaker Studio 2</span>不要在连接时阻塞。 </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">返回：<a href="Networking.htm">联网</a></div><div style="float:right">下一个：<a href="network_set_timeout.htm">network_set_timeout</a></div></div></div><h5> <span data-keyref="Copyright Notice">©版权所有<span class="notranslate">YoYo Games Ltd.</span> 2021保留所有权利</span></h5>
  </div>
  <!-- KEYWORDS
network_set_config
network_config_connect_timeout
network_config_use_non_blocking_socket
network_config_enable_reliable_udp
network_config_disable_reliable_udp
network_config_avoid_time_wait 
-->
  <!-- TAGS
network_set_config
-->
</body>
</html>