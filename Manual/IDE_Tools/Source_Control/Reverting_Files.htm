<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>恢复文件</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section that covers Source Control reverting files" />
  <meta name="rh-index-keywords" content="Source Control - Reverting Files" />
  <meta name="search-keywords" content="revert files" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>恢复文件</h1>
  <p>在前面的章节中，你已经看到了如何<a href="Repository_Options.htm">创建一个版本库并</a> <a href="Standard_Workflow.htm">提交东西到其中，</a>但是如果你犯了一个错误，想 &quot;回滚 &quot;到以前的
    提交会怎样？让我们做一个故意的错误，看看如何处理它...</p>
  <p>首先创建一个新的资源--在这个例子中，我们将创建一个脚本资源--最初你会看到没有状态图标，因为就源控制而言，它还不存在。在脚本资源中添加一行简单的
    的代码，比如。</p>
  <p class="code">show_debug_message(&quot;Hello World&quot;)。</p>
  <p>如果你现在关闭代码编辑器，脚本将被保存，在<a href="../../Introduction/The_Asset_Browser.htm">资产浏览器</a>中，修改过的文件图标<img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png"> ，会出现在它的旁边。
    现在，打开<strong>提交 </strong>窗口，你会看到有四个阶段性的变化，因为新的资源会自动被加入。</p>
  <p><img alt="Source Control Staged Changes" class="center" src="../../assets/Images/IDE Tools/SCM_StagedChanges.png">分阶段的变化将是。</p>
  <ul class="colour">
    <li> <span class="inline">.yyp</span> 项目文件</li>
    <li>一个视图文件</li>
    <li> <span class="notranslate">GML</span>脚本本身</li>
    <li>参考它的 <span class="inline">.yy</span> 文件</li>
  </ul>
  <p>你应该输入一个提交信息，然后点击<strong>提交 </strong>按钮，就像我们之前解释的那样。现在，我们回到我们的脚本，把这行代码改为（例如）。</p>
  <p class="code">show_debug_message(&quot;Hello World, how are you?&quot;)。</p>
  <p>当我们关闭代码编辑器时，脚本旁边又会出现一个红色的图标<img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png"> ，但我们已经意识到我们的代码犯了一个错误，我们想要
    回滚到以前的版本来修复它（显然，你可以直接打开脚本，然后轻松地修复它，因为这个例子非常简单，但在大型项目中，这通常不是一个可行的方法）。我们需要做的是<strong>回滚 </strong>我们的
    变化。</p>
  <p>要恢复一个改动，我们首先需要再次打开提交窗口，所以我们再一次进入<strong>源代码控制</strong>&gt;<strong>提交改动</strong>。我们修改过的文件将再次被暂存，准备提交，但这并不是我们想要的结果
    所以我们点击 "<strong>取消所有</strong>暂存 "按钮，把它从暂存区拿出来。</p>
  <p>如果我们现在右击 <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>我们就会得到一个上下文菜单，其中有一个选项是<strong>恢复路径。</strong></p>
  <p><img alt="Source Control Revert Path" class="center" src="../../assets/Images/IDE Tools/SCM_RevertPath.png">当你选择这个选项时，你将把文件恢复到它们以前的状态。</p>
  <p class="note"><strong>重要的是!</strong>当你恢复时，你会收到一条信息，要求你重新加载或保存当前项目，因为文件检查器检测到磁盘上的变化：<br>
    <img alt="Source Control Warning" class="center" src="../../assets/Images/IDE Tools/SCM_Warning.png">你必须点击重新加载而不是保存，因为保存会保存内存中的内容，而不是重新加载恢复的文件。</p>
  <p>当你编辑了一些东西，想在没有提交的情况下进行修改时，这一切都很好，但当你已经提交了一个或多个修改，想回滚到<em>之前的 </em>提交时，怎么办？好吧，让我们再次编辑
    我们再编辑一下我们的脚本，比如说</p>
  <p class="code">show_debug_message(&quot;这是个坏主意&quot;)。</p>
  <p>现在我们像以前一样提交它，让它处于源码控制之下。所以，这是个坏主意，我们想回滚，这意味着首先我们需要打开<strong>源代码控制</strong>&gt;<strong>查看历史</strong>窗口。在这里我们会看到一个
    列表，从最初的提交开始，到脚本的提交，再到我们作为 &quot;坏主意 &quot;编辑的脚本的提交，所有之前的提交都在这个窗口中。</p>
  <p><img alt="Source Control Bad Idea History" class="center" src="../../assets/Images/IDE Tools/SCM_BadIdea.png">我们现在有两个选择。我们可以恢复整个修订版--这将会把所有被修改的文件恢复到所选提交的文件上--或者我们可以选择恢复一个路径--这将会简单地恢复一个文件。
    或者我们可以选择恢复一个路径--这将简单地恢复一个文件。让我们先做第一个选择。</p>
  <ul class="colour">
    <li>右键点击 <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>我们在<strong>提交历史</strong>窗格中的第二次提交（即 &quot;Hello World &quot;提交）。</li>
    <li>选择<strong>恢复到这个修订版</strong>，然后在警告信息上选择<strong>重新加载</strong>。</li>
  </ul>
  <p>你应该看到，该脚本现在有一个红色的状态图标<img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png"> ，如果我们打开它，会有以下内容。</p>
  <p><img alt="Source Control Revert To Revision" class="center" src="../../assets/Images/IDE Tools/SCM_RevertToRevision.png">然后我们可以在项目上做一个提交，我们将再次回到我们的位置。但是我们也可以通过以下方式撤销
    撤销该文件的操作，并通过以下方式取回我们的 &quot;坏主意 &quot;提交。</p>
  <ul class="colour">
    <li>打开 "<strong>提交更改</strong>"窗口。</li>
    <li>解除含有 &quot;Hello World &quot;代码的脚本的舞台。</li>
    <li>右键点击 <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>并<strong>还原路径</strong>。</li>
  </ul>
  <p>现在，我们又回到了项目中的错误文件！我们可以利用这个机会，只恢复那个文件的路径，而不是把所有东西都恢复到以前的版本。好吧，我们可以利用这个机会，只恢复那个文件的路径，而不是把所有东西都恢复到以前的版本。为此，我们需要做以下工作。</p>
  <ul class="colour">
    <li>打开 "<strong>查看历史</strong>"窗口。</li>
    <li>点击第二个提交（&quot;Hello World &quot;的提交）。</li>
    <li>右键点击 <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>我们的脚本<span class="notranslate">GML</span>在文件窗格中，选择<strong>恢复路径</strong>。</li>
  </ul>
  <p>我们应该回到我们的 &quot;Hello World &quot;代码，然后我们可以做一个新的提交，用修正后的文件再次更新源代码控制。</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回。<a href="../Source_Control.htm">源头控制</a></div>
        <div style="float:right">下一步。<a href="Cloning_A_Repository.htm">克隆一个存储库</a> </div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span>版权所有。2021年 保留所有权利</span></h5>
  </div>
  <!-- KEYWORDS
Source Control Reverting Files
reverting files
-->
  <!-- TAGS
source_control_revert
-->
</body>
</html>