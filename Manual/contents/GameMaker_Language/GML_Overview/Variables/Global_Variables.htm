<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>全局变量</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page explaining global variables" />
  <meta name="rh-index-keywords" content="global,globalvar,Global Variables" />
  <meta name="search-keywords" content="global,global variables,globalvar" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>全局变量</h1>
  <p>对<strong>全局变量 </strong>的基本描述是：一旦声明，它就不属于任何特定的实例，但却可以被所有人访问。就像<a href="Local_Variables.htm">局部变量</a>一样，全局变量必须使用标识符来声明。
    但与局部变量不同的是，全局变量在<em>游戏结束前一直</em>保留在内存中。因此，你可以创建一个全局变量来记录（例如）玩家拥有的子弹数量，然后只需在游戏的不同阶段更新
    这个变量在游戏中的不同时间点，以任何实例或函数的形式，随时更新。从本质上讲，全局变量不属于任何特定的实例，可以被所有的实例访问、改变和使用。
    变量的任何改变都是 &quot;全局的&quot;，因为所有使用该变量的实例都会受到改变的影响。让我们来看看一个例子。</p>
  <p class="code">global.food = 5;</p>
  <p>我们声明 &quot;<span class="inline">food</span>&quot; 变量时，先写 &quot;<span class="inline">global</span>&quot; ，然后写 &quot;<span class="inline">.</span>&quot; ，告诉 GameMaker Studio 2，这个<span class="notranslate">变量现在是</span>全局范围。
    从现在开始，当我们需要以任何方式访问或改变这个变量时，我们将需要使用这个表格。所以，我们已经创建了一个新的变量，叫做 &quot;<span class="inline">food</span>&quot; ，并宣布它为全局变量。现在，任何
    实例或函数都可以以任何方式使用和改变这个变量，所有其他实例都会 &quot;看到 &quot;这个变量。例如，我们可以有一个不同的食物对象，玩家与之发生碰撞，在碰撞事件中，我们有。</p>
  <p class="code">global.food +=1。</p>
  <p>我们也有另一个对象，像这样画出这个值。</p>
  <p class="code">draw_text(32, 32, &quot;food = &quot; + string(global.food));</p>
  <p>通过全局变量，我们可以改变数值，并看到这些变化反映在引用该变量的所有对象实例上。和<i>局部变量</i>一样，你必须注意不要把全局变量的名字和任何实例变量的名字一样
    变量一样，因为这可能会给你带来问题，并且由于变量的重叠而使Bug悄悄进入你的游戏，这有时会是一个难以调试的问题。一般来说，你应该有一个单一的对象，在游戏开始时声明所有的全局变量。
    例如，在游戏的第一个房间里放置的第一个对象实例的<a href="../../../The_Asset_Editors/Object_Properties/Other_Events.htm">房间开始事件</a>中）或者一个单一的<a href="../Script_Functions.htm">脚本函数</a>来声明所有的全局变量，因为这给了你一个方便的地方，如果你需要检查一个变量的名字或者编辑一个值，你可以马上回去引用所有的变量。</p>
  <p><span class="notranslate">GameMaker Studio 2</span>也有一系列 &quot;内置 &quot;的全局变量，所以你应该注意它们，因为你可能会把你的一个实例变量命名为相同的名字，或者希望有你自己的全局变量有相同的名字，并想知道为什么你会出现
    得到错误的原因!然而，它们很容易被发现，因为它们在代码编辑器中以不同的颜色显示，而且还出现在底部的自动完成栏中。大多数内置的全局变量是非常特殊的，只有在极少数情况下才会使用。
    但有一个重要的变量经常被使用，而且没有被列在其他地方。</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/async_load.htm"><tt>异步加载</tt></a></li>
  </ul>
  <p>还有三个<b>废弃的</b>内置全局变量，你应该注意到（这些变量只是为了支持<span class="notranslate">GameMaker</span>以前版本的遗留项目而设计的，应该 <b><i>不要在新项目中使用</i></b>):</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/score.htm"><tt>得分</tt></a></li>
    <li><a href="Builtin_Global_Variables/health.htm"><tt>健康</tt></a></li>
    <li><a href="Builtin_Global_Variables/lives.htm"><tt>生活</tt></a></li>
  </ul>
  <p>最后，有两个变量可以用于脚本函数和方法。</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/argument.htm">争论</a></li>
    <li><a href="Builtin_Global_Variables/argument_count.htm">论据数</a></li>
  </ul>
  <p>下面的表格也可以用来声明全局变量，但它是 <i><b>只是为了向后兼容而包括在内</b></i>，不建议你在新项目中使用这种形式，因为<span class="notranslate">GameMaker</span>的未来版本可能不支持它。</p>
  <p>创建全局变量的第二种形式是使用<tt>globalvar</tt>声明将其声明为<tt>全局变量</tt>，就像你使用<tt>var</tt>声明将局部变量声明为全局变量一样。</p>
  <p class="note"><b>重要的是!</b> <tt>globalvar</tt>声明已<b>被弃用</b>，只支持用于遗留用途。你应该<b>总是</b>使用<tt>global.</tt>标识符来标记全局变量。</p>
  <p>这个（废弃的）声明将被用于以下方面。</p>
  <p class="code">globalvar food;<br> food = 5;</p>
  <p>一旦以这种方式声明，变量 &quot;food &quot;现在就被认为是全局的，不需要全局<tt>前缀--</tt>这也意味着在你的代码中识别全局变量要难得多，而且也更容易出现变量
    重叠，因为你在不同的对象或你安装的扩展中使用相同的变量名。一旦以这种方式声明，全局变量的访问方式如下。</p>
  <p class="code">食物+=2。</p>
  <p>或。</p>
  <p class="code">draw_text(32, 32, &quot;food = &quot; + string(food));</p>
  <p>正如你所看到的，如果没有任何东西表明这个变量是全局范围的，你就有可能为你的游戏中出现的许多微妙问题埋下伏笔，这就是为什么应该避免这种声明。</p>
  <p>在处理全局变量时，有几个函数旨在帮助你，你可以在下面的页面上找到这些函数。</p>
  <ul class="colour">
    <li><a href="../../GML_Reference/Variable_Functions/Variable_Functions.htm">变量函数</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">回来。<a href="../Variables_And_Variable_Scope.htm">变量和变量范围</a></div>
        <div style="float:right">下一步。<a href="Constants.htm">常数</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span>版权所有。2021年 保留所有权利</span></h5>
  </div>
  <!-- KEYWORDS
global
globalvar
global variables
-->
  <!-- TAGS
global_variables
-->
</body>
</html>